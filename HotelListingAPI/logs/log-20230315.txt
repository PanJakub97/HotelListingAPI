2023-03-15 20:24:16.984 +01:00 [INF] Now listening on: https://localhost:7236
2023-03-15 20:24:17.036 +01:00 [INF] Now listening on: http://localhost:5246
2023-03-15 20:24:17.040 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-15 20:24:17.042 +01:00 [INF] Hosting environment: Development
2023-03-15 20:24:17.043 +01:00 [INF] Content root path: C:\Users\User\Desktop\Kodowanie\055_HotelListingAPI\HotelListingAPI\HotelListingAPI
2023-03-15 20:25:41.939 +01:00 [INF] HTTP POST /api/Account/login responded 401 in 3585.4805 ms
2023-03-15 20:25:59.925 +01:00 [INF] HTTP POST /api/Account/login responded 415 in 13.7317 ms
2023-03-15 20:26:19.274 +01:00 [INF] HTTP POST /api/Account/login responded 415 in 52.9827 ms
2023-03-15 20:26:23.989 +01:00 [INF] HTTP POST /api/Account/login responded 415 in 1.0490 ms
2023-03-15 20:26:41.229 +01:00 [INF] HTTP POST /api/Account/login responded 415 in 1.3767 ms
2023-03-15 20:27:09.407 +01:00 [INF] HTTP POST /api/Account/login responded 200 in 432.3960 ms
2023-03-15 20:27:33.867 +01:00 [INF] HTTP POST /api/Account/login responded 415 in 1.0777 ms
2023-03-15 20:28:02.736 +01:00 [INF] HTTP POST /api/Account/login responded 200 in 114.2562 ms
2023-03-15 20:29:54.216 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 12.3514 ms
2023-03-15 20:30:47.758 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 3.4840 ms
2023-03-15 20:30:48.741 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 42.3460 ms
2023-03-15 20:30:49.650 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 0.2444 ms
2023-03-15 20:30:55.718 +01:00 [INF] Now listening on: https://localhost:7236
2023-03-15 20:30:55.764 +01:00 [INF] Now listening on: http://localhost:5246
2023-03-15 20:30:55.767 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-15 20:30:55.769 +01:00 [INF] Hosting environment: Development
2023-03-15 20:30:55.770 +01:00 [INF] Content root path: C:\Users\User\Desktop\Kodowanie\055_HotelListingAPI\HotelListingAPI\HotelListingAPI
2023-03-15 20:31:01.584 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 144.7442 ms
2023-03-15 20:31:17.664 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 6.5576 ms
2023-03-15 20:31:59.204 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 4.7271 ms
2023-03-15 20:32:12.998 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 1.1270 ms
2023-03-15 20:32:56.536 +01:00 [INF] Now listening on: https://localhost:7236
2023-03-15 20:32:56.580 +01:00 [INF] Now listening on: http://localhost:5246
2023-03-15 20:32:56.583 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-15 20:32:56.584 +01:00 [INF] Hosting environment: Development
2023-03-15 20:32:56.585 +01:00 [INF] Content root path: C:\Users\User\Desktop\Kodowanie\055_HotelListingAPI\HotelListingAPI\HotelListingAPI
2023-03-15 20:33:17.597 +01:00 [INF] HTTP POST /api/Account/login responded 200 in 2338.6481 ms
2023-03-15 20:33:28.654 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 69.6854 ms
2023-03-15 20:34:01.221 +01:00 [INF] HTTP POST /api/Countries responded 401 in 5.8476 ms
2023-03-15 20:34:25.434 +01:00 [INF] HTTP POST /api/Account/login responded 200 in 173.8096 ms
2023-03-15 20:34:39.294 +01:00 [INF] HTTP POST /api/Countries responded 401 in 1.6599 ms
2023-03-15 20:34:55.195 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 1.7357 ms
2023-03-15 20:35:27.314 +01:00 [INF] HTTP POST /api/Countries/ responded 401 in 1.0168 ms
2023-03-15 20:35:31.650 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 1.1351 ms
2023-03-15 20:36:09.078 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 1.2202 ms
2023-03-15 20:36:15.355 +01:00 [INF] HTTP POST /api/Account/login responded 200 in 128.1156 ms
2023-03-15 20:37:15.453 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 1.0419 ms
2023-03-15 20:37:21.043 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 1.0366 ms
2023-03-15 20:37:23.905 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 0.8814 ms
2023-03-15 20:37:58.532 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 0.9617 ms
2023-03-15 20:38:11.866 +01:00 [INF] HTTP POST /api/Account/login responded 200 in 102.0551 ms
2023-03-15 20:38:13.057 +01:00 [INF] HTTP POST /api/Account/login responded 200 in 105.7147 ms
2023-03-15 20:38:35.724 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 0.7776 ms
2023-03-15 20:38:51.519 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 1.0011 ms
2023-03-15 20:38:56.069 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 1.1432 ms
2023-03-15 20:40:30.432 +01:00 [INF] HTTP POST /api/Account/register responded 400 in 255.2267 ms
2023-03-15 20:40:41.686 +01:00 [INF] HTTP POST /api/Account/register responded 200 in 444.3567 ms
2023-03-15 20:40:56.353 +01:00 [INF] HTTP POST /api/Account/register responded 400 in 102.5209 ms
2023-03-15 20:41:04.514 +01:00 [INF] HTTP POST /api/Account/register responded 200 in 125.8408 ms
2023-03-15 20:41:23.288 +01:00 [INF] HTTP POST /api/Account/login responded 400 in 49.1284 ms
2023-03-15 20:41:28.687 +01:00 [INF] HTTP POST /api/Account/login responded 200 in 104.4717 ms
2023-03-15 20:41:43.263 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 0.8269 ms
2023-03-15 20:42:36.095 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 1.2789 ms
2023-03-15 20:42:42.622 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 0.3342 ms
2023-03-15 20:43:00.913 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 1.2084 ms
2023-03-15 20:43:10.771 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 1.3102 ms
2023-03-15 20:43:31.580 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 0.7436 ms
2023-03-15 20:44:05.195 +01:00 [INF] Now listening on: https://localhost:7236
2023-03-15 20:44:05.232 +01:00 [INF] Now listening on: http://localhost:5246
2023-03-15 20:44:05.234 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-15 20:44:05.236 +01:00 [INF] Hosting environment: Development
2023-03-15 20:44:05.237 +01:00 [INF] Content root path: C:\Users\User\Desktop\Kodowanie\055_HotelListingAPI\HotelListingAPI\HotelListingAPI
2023-03-15 20:44:11.821 +01:00 [INF] HTTP POST /api/Account/login responded 200 in 2494.7119 ms
2023-03-15 20:44:20.581 +01:00 [INF] HTTP GET /api/Countries/ responded 200 in 169.0993 ms
2023-03-15 20:45:05.781 +01:00 [INF] HTTP PUT /api/Countries/8 responded 401 in 59.8951 ms
2023-03-15 20:45:23.188 +01:00 [INF] HTTP PUT /api/Countries/8 responded 401 in 4.1321 ms
2023-03-15 20:45:59.701 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 1.6351 ms
2023-03-15 20:46:15.767 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 1.2484 ms
2023-03-15 20:46:31.798 +01:00 [INF] HTTP POST /api/Account/login responded 200 in 125.3597 ms
2023-03-15 20:47:23.525 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 0.8411 ms
2023-03-15 20:55:17.520 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - HotelListingAPI.Controllers.AccountController.Login (HotelListingAPI). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-03-15 20:55:20.844 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

HotelListingAPI.Controllers.CountriesController.GetCountries (HotelListingAPI)
HotelListingAPI.Controllers.CountriesController.GetCountry (HotelListingAPI)
HotelListingAPI.Controllers.CountriesController.PostCountry (HotelListingAPI)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(CandidateState[] candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, CandidateState[] candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-03-15 20:55:23.223 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

HotelListingAPI.Controllers.CountriesController.GetCountries (HotelListingAPI)
HotelListingAPI.Controllers.CountriesController.GetCountry (HotelListingAPI)
HotelListingAPI.Controllers.CountriesController.PostCountry (HotelListingAPI)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(CandidateState[] candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, CandidateState[] candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-03-15 20:55:40.948 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - HotelListingAPI.Controllers.AccountController.Login (HotelListingAPI). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-03-15 20:55:56.922 +01:00 [INF] Now listening on: https://localhost:7236
2023-03-15 20:55:56.965 +01:00 [INF] Now listening on: http://localhost:5246
2023-03-15 20:55:56.968 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-15 20:55:56.969 +01:00 [INF] Hosting environment: Development
2023-03-15 20:55:56.971 +01:00 [INF] Content root path: C:\Users\User\Desktop\Kodowanie\055_HotelListingAPI\HotelListingAPI\HotelListingAPI
2023-03-15 20:56:30.366 +01:00 [INF] HTTP POST /api/countries/ responded 201 in 2711.4234 ms
2023-03-15 20:56:58.772 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 12.0908 ms
2023-03-15 20:57:08.219 +01:00 [INF] HTTP POST /api/Account/login responded 200 in 750.5731 ms
2023-03-15 20:58:08.611 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 61.2153 ms
2023-03-15 20:58:16.036 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 2.0437 ms
2023-03-15 20:58:50.898 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 2.1876 ms
2023-03-15 21:00:04.960 +01:00 [INF] HTTP POST /api/Account/login responded 200 in 133.1809 ms
2023-03-15 21:03:07.854 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 0.8486 ms
2023-03-15 21:03:47.369 +01:00 [INF] Now listening on: https://localhost:7236
2023-03-15 21:03:47.404 +01:00 [INF] Now listening on: http://localhost:5246
2023-03-15 21:03:47.407 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-15 21:03:47.408 +01:00 [INF] Hosting environment: Development
2023-03-15 21:03:47.409 +01:00 [INF] Content root path: C:\Users\User\Desktop\Kodowanie\055_HotelListingAPI\HotelListingAPI\HotelListingAPI
2023-03-15 21:06:39.261 +01:00 [INF] Now listening on: https://localhost:7236
2023-03-15 21:06:39.302 +01:00 [INF] Now listening on: http://localhost:5246
2023-03-15 21:06:39.303 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-15 21:06:39.304 +01:00 [INF] Hosting environment: Development
2023-03-15 21:06:39.305 +01:00 [INF] Content root path: C:\Users\User\Desktop\Kodowanie\055_HotelListingAPI\HotelListingAPI\HotelListingAPI
2023-03-15 21:06:45.901 +01:00 [INF] HTTP POST /api/countries/ responded 401 in 156.0185 ms
2023-03-15 21:07:27.594 +01:00 [INF] HTTP POST /api/Account/register responded 200 in 2515.5307 ms
2023-03-15 21:21:35.841 +01:00 [INF] HTTP POST /api/Account/login responded 400 in 83.6697 ms
2023-03-15 21:21:48.908 +01:00 [INF] HTTP POST /api/Account/login responded 200 in 355.0598 ms
2023-03-15 21:22:56.231 +01:00 [INF] HTTP DELETE /api/Countries/10 responded 404 in 80.6606 ms
2023-03-15 21:23:23.874 +01:00 [INF] HTTP DELETE /api/Hotels/8 responded 404 in 60.2374 ms
2023-03-15 21:23:28.825 +01:00 [INF] HTTP DELETE /api/Hotels/12 responded 404 in 5.3997 ms
2023-03-15 21:23:32.612 +01:00 [INF] HTTP DELETE /api/Hotels/10 responded 204 in 56.7257 ms
2023-03-15 21:23:44.619 +01:00 [INF] HTTP GET /api/Hotels/ responded 200 in 46.7059 ms
2023-03-15 21:24:05.332 +01:00 [INF] HTTP DELETE /api/Hotels/9 responded 204 in 45.1037 ms
2023-03-15 21:25:07.448 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'HotelListingAPI.Data.HotelListingDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Hotels_Countries_CountryId". The conflict occurred in database "HotelListingAPIDb", table "dbo.Countries", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:99f67397-9f30-499e-a8e8-6a4f7ca181ae
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Hotels_Countries_CountryId". The conflict occurred in database "HotelListingAPIDb", table "dbo.Countries", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:99f67397-9f30-499e-a8e8-6a4f7ca181ae
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-03-15 21:25:07.468 +01:00 [ERR] HTTP POST /api/Hotels responded 500 in 138.6048 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Hotels_Countries_CountryId". The conflict occurred in database "HotelListingAPIDb", table "dbo.Countries", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:99f67397-9f30-499e-a8e8-6a4f7ca181ae
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HotelListingAPI.Repository.GenericRepository`1.AddAsync(T entity) in C:\Users\User\Desktop\Kodowanie\055_HotelListingAPI\HotelListingAPI\HotelListingAPI\Repository\GenericRepository.cs:line 18
   at HotelListingAPI.Controllers.HotelsController.PostHotel(CreateHotelDto hotelDto) in C:\Users\User\Desktop\Kodowanie\055_HotelListingAPI\HotelListingAPI\HotelListingAPI\Controllers\HotelsController.cs:line 94
   at lambda_method374(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2023-03-15 21:25:07.517 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Hotels_Countries_CountryId". The conflict occurred in database "HotelListingAPIDb", table "dbo.Countries", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:99f67397-9f30-499e-a8e8-6a4f7ca181ae
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at HotelListingAPI.Repository.GenericRepository`1.AddAsync(T entity) in C:\Users\User\Desktop\Kodowanie\055_HotelListingAPI\HotelListingAPI\HotelListingAPI\Repository\GenericRepository.cs:line 18
   at HotelListingAPI.Controllers.HotelsController.PostHotel(CreateHotelDto hotelDto) in C:\Users\User\Desktop\Kodowanie\055_HotelListingAPI\HotelListingAPI\HotelListingAPI\Controllers\HotelsController.cs:line 94
   at lambda_method374(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-03-15 21:26:07.861 +01:00 [INF] HTTP POST /api/Hotels responded 201 in 90.1197 ms
